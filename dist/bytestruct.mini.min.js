let e={f:"Float",s:"Int",u:"Uint"},t=/^([fsub])(\d+)(\*(\d+)?)?|(l|b)e$/;export function bytes(l,...r){let s;let f=[];for(let e of l){for(let l of e.split(/\s+/))if(l){let e=l.match(t);e[5]?s="le"===e[5]:f.push([e[1],e[2],e[4]??1,s])}r.length&&(f.at(-1)[2]=r.shift())}return{byteSize(){let e=0;for(let[t,l,r]of f)e+="b"!==t?l*r/8:l*r;return e},readBytes(t){let l=new DataView(t),r=[],s=0;for(let[i,n,o,u]of f)if("b"===i){let e=new Uint8Array(t,s,n*o);r.push(...e),s+=n*o}else{let t=n/8,f=64===n&&/[su]/.test(i)?`Big${e[i]}`:e[i];for(let e=0;e<o;e++){let e=l[`get${f}${n}`](s,u);r.push(e),s+=t}}return r},bytes(e){let t=new ArrayBuffer(this.byteSize());return this.writeBytes(e,t),t},writeBytes(t,l){let r=new DataView(l),s=0,i=0;for(let[n,o,u,a]of f)if("b"===n){let e=t.slice(i,i+o*u);new Uint8Array(l,i).set(e),i+=o*u,s+=o*u}else{let l=o/8,f=64===o&&/[su]/.test(n)?`Big${e[n]}`:e[n];for(let e=0;e<u;e++)r[`set${f}${o}`](s,t[i++],a),s+=l}return s}}}
